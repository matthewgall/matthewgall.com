{{ if .Site.Params.social_sharing }}
<section class="social-share" role="complementary" aria-label="Share this post">
  <h4 class="social-share-title">ðŸ’¬ Share this post</h4>
  
  <div class="social-share-buttons">
    <!-- X (Twitter) -->
    <a href="https://twitter.com/intent/tweet?text={{ .Title | urlquery }}&url={{ .Permalink | urlquery }}{{ with .Site.Params.twitter.site }}&via={{ . }}{{ end }}" 
       target="_blank" 
       rel="noopener noreferrer" 
       class="share-button twitter"
       aria-label="Share on X (Twitter)">
      {{ partial "social-icon.html" "twitter" }}
      <span>{{ partial "social-display-name.html" "twitter" }}</span>
    </a>

    <!-- LinkedIn -->
    <a href="https://www.linkedin.com/shareArticle?mini=true&url={{ .Permalink | urlquery }}&title={{ .Title | urlquery }}" 
       target="_blank" 
       rel="noopener noreferrer" 
       class="share-button linkedin"
       aria-label="Share on LinkedIn">
      {{ partial "social-icon.html" "linkedin" }}
      <span>{{ partial "social-display-name.html" "linkedin" }}</span>
    </a>

    <!-- Bluesky -->
    <a href="https://bsky.app/intent/compose?text={{ .Title | urlquery }}%20{{ .Permalink | urlquery }}" 
       target="_blank" 
       rel="noopener noreferrer" 
       class="share-button bluesky"
       aria-label="Share on Bluesky">
      {{ partial "social-icon.html" "bluesky" }}
      <span>{{ partial "social-display-name.html" "bluesky" }}</span>
    </a>

    <!-- Threads -->
    <a href="https://www.threads.net/intent/post?text={{ .Title | urlquery }}%20{{ .Permalink | urlquery }}" 
       target="_blank" 
       rel="noopener noreferrer" 
       class="share-button threads"
       aria-label="Share on Threads">
      {{ partial "social-icon.html" "threads" }}
      <span>{{ partial "social-display-name.html" "threads" }}</span>
    </a>

    <!-- Copy Link -->
    <button class="share-button copy-link" 
            data-url="{{ .Permalink }}" 
            aria-label="Copy link to clipboard">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
        <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
      </svg>
      <span>Copy Link</span>
    </button>
  </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const copyButtons = document.querySelectorAll('.copy-link');
  
  copyButtons.forEach(button => {
    button.addEventListener('click', function() {
      const url = this.dataset.url;
      
      // Modern clipboard API with fallback
      if (navigator.clipboard && window.isSecureContext) {
        navigator.clipboard.writeText(url).then(function() {
          showCopiedState(button);
        }).catch(function(err) {
          console.error('Clipboard API failed: ', err);
          fallbackCopyToClipboard(url, button);
        });
      } else {
        fallbackCopyToClipboard(url, button);
      }
    });
  });
  
  function showCopiedState(button) {
    button.classList.add('copied');
    const span = button.querySelector('span');
    const originalText = span.textContent;
    span.textContent = 'âœ“ Copied!';
    
    setTimeout(function() {
      button.classList.remove('copied');
      span.textContent = originalText;
    }, 2000);
  }
  
  function fallbackCopyToClipboard(text, button) {
    const textArea = document.createElement('textarea');
    textArea.value = text;
    textArea.style.position = 'fixed';
    textArea.style.left = '-999999px';
    textArea.style.top = '-999999px';
    document.body.appendChild(textArea);
    textArea.focus();
    textArea.select();
    
    try {
      document.execCommand('copy');
      showCopiedState(button);
    } catch (err) {
      console.error('Fallback copy failed: ', err);
    }
    
    document.body.removeChild(textArea);
  }
});
</script>
{{ end }}